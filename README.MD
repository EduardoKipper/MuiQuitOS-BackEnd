# ğŸ¦Ÿ MuiQuitOS-BackEnd

Backend MVP em Julia para registro e controle de focos do mosquito Aedes Aegypti.

## âš™ï¸ Setup do Sistema

1. **PrÃ©-requisitos:**
   - Julia instalado ([ğŸ”—](https://julialang.org/downloads/))

2. **Instale as dependÃªncias do projeto:**
   Abra o terminal na pasta do projeto (MuiQuitOS-BackEnd) e execute em sequÃªncia:
   ```sh
   julia
   ] activate .
   dev ./MuiQuitOSBackEnd
   ```
   (O `]` entra no modo de pacote do Julia REPL. Use Backspace para voltar ao prompt `julia>`.)

3. **Instale as dependÃªncias do pacote:**
   Feche o terminal anterior e abra um novo.
   No novo terminal, entre na pasta do pacote:
   ```sh
   cd MuiQuitOSBackEnd
   ```
   E execute em sequÃªncia:
   ```sh
   julia
   ] activate .
   add CSV DataFrames JSON3 HTTP Sockets
   ```

4. **Execute o servidor:**
   Com as etapas anteriores feitas, toda vez que quiser executar o servidor basta executar, em ordem:
   ```sh
   julia
   ] activate .
   ```
   Pressione CTRL + C e execute:
   ```sh
   include("app.jl")
   ```

   ### O backend estarÃ¡ disponÃ­vel em: http://localhost:8080 ğŸš€

## ğŸ“ Estrutura dos Arquivos
- `database/users.csv`: ğŸ‘¤ UsuÃ¡rios do sistema
- `database/registers.csv`: ğŸ¦Ÿ Registros de focos de mosquito
- `MuiQuitOSBackEnd/src/models/`: ğŸ§© DefiniÃ§Ãµes de tipos (User, Register)
- `MuiQuitOSBackEnd/src/controllers/`: ğŸ§  LÃ³gica das rotas
- `MuiQuitOSBackEnd/src/routes/`: ğŸ›£ï¸ DefiniÃ§Ã£o das rotas

## ğŸ“¡ Rotas da API

### ğŸ”‘ Login
- `POST /login`
  - **Body:** `{ "name": "string", "password": "string" }`
  - **Resposta:** 200 OK com dados do usuÃ¡rio, 401 para credenciais invÃ¡lidas

### ğŸ‘¤ UsuÃ¡rios
- `GET /users` â€” Lista todos os usuÃ¡rios
- `POST /users` â€” Cria usuÃ¡rio
  - **Body:** `{ "name": "string", "email": "string", "password": "string", "type": "string" }`
- `PUT /users` â€” Atualiza usuÃ¡rio
  - **Body:** igual ao POST
- `DELETE /users` â€” Remove usuÃ¡rio
  - **Body:** `{ "email": "string" }`

### ğŸ¦Ÿ Registros
- `GET /registers` â€” Lista todos os registros
- `POST /registers` â€” Cria registro
  - **Body:** `{ "user_id": "string", "cep": "string", "datetime": "string", "intensity": float, "evidence": "string", "latitude": float, "longitude": float, "city": "string", "state": "string", "neighbourhood": "string", "access_difficulty": int, "focus_size": int, "larvae": boolean }`
- `PUT /registers` â€” Atualiza registro
  - **Body:** `{ "register_id": int, "user_id": "string", "cep": "string", "datetime": "string", "intensity": float, "evidence": "string", "latitude": float, "longitude": float, "city": "string", "state": "string", "neighbourhood": "string", "access_difficulty": int, "focus_size": int, "larvae": boolean }`
- `DELETE /registers` â€” Remove registro
  - **Body:** `{ "register_id": int }`

## ğŸ“‹ Tabela de Endpoints da API

| MÃ©todo | Rota         | DescriÃ§Ã£o                        | Body/ParÃ¢metros                                                                                                                                                                                           | Resposta Exemplo           |
|--------|--------------|-----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
| POST   | /login       | Login de usuÃ¡rio                  | `{ "name": "string", "password": "string" }`                                                                                                                                                             | 200 OK (usuÃ¡rio), 401      |
| GET    | /users       | Lista todos os usuÃ¡rios           | -                                                                                                                                                                                                         | 200 OK (lista usuÃ¡rios)    |
| POST   | /users       | Cria novo usuÃ¡rio                 | `{ "name": "string", "email": "string", "password": "string", "type": "string" }`                                                                                                                            | 201 Created, 409 (duplicado) |
| PUT    | /users       | Atualiza usuÃ¡rio                  | `{ "name": "string", "email": "string", "password": "string", "type": "string" }`                                                                                                                            | 200 OK                     |
| DELETE | /users       | Remove usuÃ¡rio                    | `{ "email": "string" }`                                                                                                                                                                                  | 200 OK                     |
| GET    | /registers   | Lista todos os registros          | -                                                                                                                                                                                                         | 200 OK (lista registros)   |
| POST   | /registers   | Cria novo registro de mosquito    | `{ "user_id": "string", "cep": "string", "datetime": "string", "intensity": float, "evidence": "string", "latitude": float, "longitude": float, "city": "string", "state": "string", "neighbourhood": "string", "access_difficulty": int, "focus_size": int, "larvae": boolean }` | 201 Created, 400 (user_id invÃ¡lido) |
| PUT    | /registers   | Atualiza registro                 | `{ "register_id": int, "user_id": "string", "cep": "string", "datetime": "string", "intensity": float, "evidence": "string", "latitude": float, "longitude": float, "city": "string", "state": "string", "neighbourhood": "string", "access_difficulty": int, "focus_size": int, "larvae": boolean }` | 200 OK                     |
| DELETE | /registers   | Remove registro                   | `{ "register_id": int }`                                                                                                                                                                                 | 200 OK                     |

> **ObservaÃ§Ã£o:**
> - Todos os bodies devem ser enviados em JSON.
> - O campo `intensity` em `/registers` Ã© um nÃºmero de ponto flutuante.
> - O campo `user_id` deve ser um email vÃ¡lido cadastrado em `/users`.

## â„¹ï¸ ObservaÃ§Ãµes
- Todos os dados sÃ£o persistidos em arquivos CSV ğŸ“„.
- O sistema nÃ£o implementa autenticaÃ§Ã£o avanÃ§ada (JWT, hashing de senha, etc).
- Ideal para MVP e testes rÃ¡pidos âš¡.

---
